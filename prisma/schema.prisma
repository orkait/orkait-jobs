generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
}

model applications {
    id              Int       @id @default(autoincrement())
    job_id          Int?
    name            String    @db.VarChar(255)
    email           String    @db.VarChar(255)
    phone           String?   @db.VarChar(50)
    resume_url      String?   @db.VarChar(255)
    cover_letter    String?
    linkedin_url    String?   @db.VarChar(255)
    portfolio_url   String?   @db.VarChar(255)
    status          String?   @default("pending") @db.VarChar(20)
    is_bookmarked   Boolean?  @default(false)
    notes           String?
    created_at      DateTime? @default(now()) @db.Timestamptz(6)
    updated_at      DateTime? @default(now()) @db.Timestamptz(6)
    referred_by     String?
    portfolio_links String[]
    jobs            jobs?     @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

    @@index([job_id], map: "idx_applications_job_id")
    @@index([status], map: "idx_applications_status")
}

model jobs {
    id           Int            @id @default(autoincrement())
    title        String         @db.VarChar(255)
    description  String
    location     String?        @db.VarChar(255)
    type         String?        @db.VarChar(50)
    department   String?        @db.VarChar(100)
    requirements String?
    status       String?        @default("draft") @db.VarChar(20)
    created_at   DateTime?      @default(now()) @db.Timestamptz(6)
    updated_at   DateTime?      @default(now()) @db.Timestamptz(6)
    applications applications[]

    @@index([status], map: "idx_jobs_status")
}
